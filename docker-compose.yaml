
services:

  flokicoin_peer:
    image: ghcr.io/myfloki/flokicoin:latest
    hostname: mainnet-flokicoin-peer
    container_name: mainnet-flokicoin-peer
    restart: on-failure
    stop_grace_period: 1m
    ports:
      - "15212:15212"
      - "15213:15213"
    volumes:
      - ./data/peer:/node
    command: "flokicoind -C=/node/flokicoind.conf --txindex"


  electrum:
    hostname: mainnet-electrum
    container_name: mainnet-electrum
    image: ghcr.io/myfloki/electrs:latest
    ports:
      - "50001:50001" 
      - "3000:3000"
    volumes:
      - ./data/electrum:/data
    environment:
      - DISCORD_WEBHOOK_URL=${DISCORD_WEBHOOK_URL}
    healthcheck:
      test: ["CMD-SHELL", "healthcheck.sh"]
      interval: 1m
      timeout: 10s
      retries: 2
      start_period: 10m
    restart: always
    command: >
      electrs -vvv
        --network mainnet
        --db-dir /data
        --jsonrpc-import
        --daemon-rpc-addr mainnet-flokicoin-peer:15213
        --electrum-rpc-addr 0.0.0.0:50001
        --http-addr 0.0.0.0:3000
        --cookie user:pass
        --enable-json-rpc-logging
        --index-unspendables

